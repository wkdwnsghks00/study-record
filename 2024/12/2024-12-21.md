 # 2024-12-21

## 운영체제 공부 내용 (KOCW 반효경 강의 1~2강 )

### 운영체제
- 운영체제의 목적 : **컴퓨터 시스템의 자원을 효율적으로 관리** / 사용자가 편리하게 사용할 수 있는 환경 제공
- 효율성(한정된 자원으로 최대의 효율), 형평성(사용자간의 형평성 있는 자원 분배)

### 운영체제의 분류
- 동시 작업 가능 여부 : 단일 작업(한번에 하나의 작업만 처리) / 다중 작업(동시에 두개이상의 작업 처리)
- 사용자의 수(컴퓨터 한대를 여러사람 동시에 접근 가능한지) : 단일 사용자() / 다중 사용자()
- 처리방식 : 일괄 처리 시스템(batch)(작업을 모아서 한번에 처리)  / 시분할시스템(time sharing)(현대의 시스템) / 실시간(realtime)(정해진 시간 안에 반드시 종료됨이 보장되어야함)

### 용어 정리
- multitasking
- multiprogramming
- time sharing
- multiprocess

- 위 용어들은 컴퓨터에서 여러 작업을 동시에 수행하는것을 뜻함
- multiprogamming은 여러 프로그램이 메모리에 올라가있음을 강조
- time sharing은 cpu의 시간 분할을 강조

- multiprocesser : 하나의 컴퓨터에 cpu가 여러 개 붙어있음을 의미

### 운영체제의 예
- 유닉스 계얼
  - UNIX
    - 대형 컴퓨터를 위한 운영체제로 탄생, 여러 사람들이 접속할 서버를 위한 운영체제
    - 유닉스 운영체제를 만들기 위해서 어셈블리언어(기계어)로 만들기 너무 어려우니까 c언어가 탄생
    - 코드 대부분 c언어, 높은 이식성, 소스코드 공개, 메모리에 상주하는 커널 구조 최소화 
    - 공개 소프트웨어 정신 -> linux (개인이 쓰기에도 좋다, 안드로이드 커널)

- 윈도우즈 계열
  - DOS
    - 개인용 pc를 위해서 탄생, 단일 사용자용 운영체제 (메모리 최대크기 640kb 제한)
  - MS WINDOWS
    - GUI 기반, 여러 프로그램 동시에. 

### 운영체제의 구조
- cpu , memory, disk, i/o device 각 자원들의 관리
  - 누구한테 cpu를 줄까? -> cpu 스케줄링
  - 한정된 메모리를 어떻게 쪼개어 쓰지? -> 메모리 관리 
  - 디스크에 어떻게 파일을 보관하지? -> 파일 관리
  - 입출력장치와 컴퓨터 간에 어떻게 정보를 주고 받지? -> 입출력 관리 (인터럽트)



**운영체제의 개발자 관점에서 수강**
- 인간의 신체가 뇌의 통제를 받듯, 컴퓨터 하드웨어는 운영체제의 통제를 받는다.

### 컴퓨터 시스템 구조   

![200341](https://github.com/user-attachments/assets/34b701e2-bd8e-4dda-8ac8-009155cca07c)

- cpu의 작업공간 = 메모리 
- cpu는  매 클럭마다 메모리에서 기계어를 읽는다
- cpu는 직접 일할수 없고 매뉴얼이 대로만 일한다 - > 프로그램카운트(pc)에 주소의 instruction만 실행하는게 운명.

- i/o device를 통제하는건 cpu가 아니고 **device controller**들이 전담하여 cpu의 역할을 한다.
cpu - memory 처럼 device 컨트롤러에도 데이터 저장  공간이 필요한데 그게 **local buffer**

#### 인터럽트
  - interrupt line -> 인터럽트라인 세팅해서 , 인터럽트 들어왓는지 확인
    - 인터럽트는 하드웨어 일꾼들이 cpu에 정보교신 위해서 <- **하드웨어 인터럽트**
    - 사용자 프로그램이 내가 직접 처리 못하고 운영체제에게 부탁할때 <- **소프트웨어 인터럽트 (트랩)**
      - 시스템콜 : 사용자 프로그램이 직접 운영체제에게 i/o 요청 ( 프로그램이 운영체제 커널 함수 호출 )


  - 인터럽트의 종류가 여러가지 있고 해야될 일들이 다 다르다. 무슨일을 해야하는지 운영체제 코드에 정의되어있다.
각 인터럽트마다 처리해야될 실제 코드 <- **인터럽트 처리 루틴**
  - 어떤 함수로 가야되는지 주소를 표시 해놓은 공간 <- **인터럽트 벡터**

**현대의 운영체제는 인터럽트에 의해 구동됨**           
  - 운영체제는 cpu를 쓸일이 없다. 사용자 프로그램이 cpu를 쓰고, 인터럽트를 받을때만 운영체제가 할당 받는다.


#### timer -> 특정 프로그램이 cpu를 독점하는 것을  방지
  - 운영체제가 사용자 프로그램에게 cpu를 넘겨줄때 타이머를 세팅하여 넘겨준다.

#### mode bit -> cpu를 운영체제가 가지고 있는지, 사용자 프로그램이 가지고 있는지 표현
  - mode bit = 0 이면 
    - 운영체제가 cpu에서 실행중 ( 커널(모니터) 모드 ) 
    - 아무 지시 실행 가능
  - mode bit = 1 이면 
    - 사용자 프로그램이 cpu에서 실행중 ( 사용자 모드 )
    - 한정된 지시만 실행 가능 (보안상 i/o 접근 같은걸 막는다)

- 인터럽트가 들어오면 cpu 제어권은 운영체제로 가고 mode bit이 자동으로 0으로 바뀐다.

#### DMA(direct memory access) controller : 메모리 접근 가능한 컨트롤러를 두어서 cpu가 인터럽트 당하는 횟수를 줄인다.
  - i/o device의 인터럽트를 받으면 local buffer의 데이터를 memory에 저장 후 cpu에게 인터럽트를 건다.

#### memory controller : dma 컨트롤러와 cpu의 메모리 동시 접근 제어

- device driver -> software 디바이스 접근 위한 프로그램
- device controller -> hardware 디바이스 제어하는 cpu같은 하드웨어    

